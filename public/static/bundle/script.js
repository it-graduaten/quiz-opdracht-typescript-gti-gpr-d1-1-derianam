(()=>{"use strict";const e=function(e){var t=this;this.answers=[],this.addAnswer=function(e){t.answers.push(e)},this.removeAnswer=function(e){t.answers.splice(e,1)},this.toString=function(){return"Question: ".concat(t.question,", Answers: ").concat(t.answers.map((function(e){return e.text})).join(", "))},this.question=e},t=function(e){var t=this;this.isCurrent=!1,this.updateScore=function(e){t.score+=e},this.toString=function(){return"Player: ".concat(t.name," - Score: ").concat(t.score)},this.name=e,this.score=0};var n;!function(e){e.Api="API",e.Custom="Vrije ingave"}(n||(n={}));const i=function(){function e(e,t,i){this.isRunning=!1,this.questions=[],this.players=[],this.currentQuestionIndex=0,this.quizDuration=0,this.numberOfPlayers=1,this.questions=e,this.players=t,this.quizDuration=i,this.questionMode=n.Custom,this.currentPlayerIndex=0}return e.prototype.setQuestionMode=function(e){this.questionMode=e},e.prototype.addQuestion=function(e){this.questions.includes(e)||this.questions.push(e)},e.prototype.addPlayer=function(e){var n=new t(e);this.players.push(n),this.updatePlayerList()},e.prototype.removePlayer=function(e){this.players=this.players.filter((function(t){return t.name!==e})),this.updatePlayerList()},e.prototype.startQuiz=function(){this.isRunning=!0,this.currentQuestionIndex=0,this.nextPlayer(),this.nextQuestion()},e.prototype.testIfAnswerIsCorrect=function(e,t){var n=this.questions[e].answers.find((function(e){return e.isCorrect}));return(null==n?void 0:n.text)===t},e.prototype.nextQuestion=function(){this.currentQuestionIndex===this.questions.length?this.endQuiz():(this.showQuestion(this.currentQuestionIndex),this.currentQuestionIndex++)},e.prototype.updatePlayerList=function(e){void 0===e&&(e="player-list");var t=document.getElementById(e);t&&(t.innerHTML="",this.players.forEach((function(e){var n=document.createElement("li");n.textContent="".concat(e.name," ").concat(e.isCurrent?"(Current)":""),t.appendChild(n)})))},e.prototype.endQuiz=function(){this.isRunning=!1,this.hideQuiz(),this.showScoreBoard()},e.prototype.hideQuiz=function(){var e=document.getElementById("quiz-container");e&&e.classList.add("d-none")},e.prototype.showCurrentPlayer=function(){var e,t=document.getElementById("current-player-container"),n=document.getElementById("current-player-name");t&&n&&(n.textContent=null===(e=this.players[this.currentPlayerIndex])||void 0===e?void 0:e.name,t.classList.remove("d-none"))},e.prototype.sortPlayersOnScore=function(){return this.players.sort((function(e,t){return t.score-e.score}))},e.prototype.nextPlayer=function(){this.players[this.currentPlayerIndex].isCurrent=!1,this.currentPlayerIndex++,this.currentPlayerIndex===this.players.length&&(this.currentPlayerIndex=0),this.showCurrentPlayer()},e.prototype.showScoreBoard=function(){document.getElementById("btnRestart").classList.remove("d-none");var e=document.getElementById("scoreboard-container"),t=document.getElementById("scoreboard");e&&(e.classList.remove("d-none"),this.sortPlayersOnScore().forEach((function(e){var n=document.createElement("li");n.textContent=e.toString(),t.appendChild(n)})))},e.prototype.showQuestion=function(e){var t=this.questions[e],n=document.getElementById("question");n&&(n.textContent=t.question);var i=document.getElementById("answer-container");i.innerHTML="",t.answers.forEach((function(e){var t=document.createElement("label"),n=document.createElement("input");n.type="radio",n.name="answer",n.value=e.text,t.appendChild(n),t.appendChild(document.createTextNode(e.text)),i.appendChild(t),t.style.display="block",t.style.marginBottom="10px"}))},e.prototype.restartQuiz=function(){this.isRunning=!1,this.currentQuestionIndex=0,this.players.forEach((function(e){return e.score=0})),this.questions=[],this.players=[],this.quizDuration=0,this.currentPlayerIndex=0,this.questionMode=n.Custom,this.numberOfPlayers=1,this.updatePlayerList()},e}();window.addEventListener("load",(function(){var t,o,r,s,u,d,a,c,l,m,y,h,p=new i([],[],0),v=[],f=document.getElementById("welcome-container"),E=document.getElementById("question-container"),g=document.getElementById("players-container"),I=document.getElementById("quiz-container"),B=document.getElementById("scoreboard-container"),q=document.getElementById("question-api-container"),x=document.getElementById("current-player-container"),L=function(){var e=document.getElementById("alertQuizRunning");e.classList.remove("d-none"),setTimeout((function(){e.classList.add("d-none")}),5e3)};null===(t=document.getElementById("aQuestions"))||void 0===t||t.addEventListener("click",(function(){p.isRunning?L():p.questionMode===n.Custom?k(E):k(q)})),null===(o=document.getElementById("aPlayers"))||void 0===o||o.addEventListener("click",(function(){if(p.isRunning)L();else{k(g);var e=document.getElementById("btn-start-quiz"),t=document.getElementById("btn-add-player");p.players.length===p.numberOfPlayers?(e.classList.remove("d-none"),t.classList.add("d-none")):(e.classList.add("d-none"),t.classList.remove("d-none"))}})),null===(r=document.getElementById("aQuiz"))||void 0===r||r.addEventListener("click",(function(){p.isRunning?L():(p.players.length===p.numberOfPlayers&&p.startQuiz(),S(),k(I),k(x))})),null===(s=document.getElementById("aScoreboard"))||void 0===s||s.addEventListener("click",(function(){p.isRunning?L():k(B)})),null===(u=document.getElementById("btn-start-quiz"))||void 0===u||u.addEventListener("click",(function(){p.players.length===p.numberOfPlayers&&p.startQuiz(),S(),k(I),k(x)})),null===(d=document.getElementById("btn-next"))||void 0===d||d.addEventListener("click",(function(){k(g)})),null===(a=document.getElementById("txtNumberQuestions"))||void 0===a||a.addEventListener("change",(function(e){var t=e.target,n=parseInt(t.value);p.quizDuration=n,document.getElementById("btnStart").disabled=n<=0})),null===(c=document.getElementById("btnStart"))||void 0===c||c.addEventListener("click",(function(){var e=document.getElementById("lstNavigation");null==e||e.classList.remove("d-none"),p.questionMode===n.Custom?(k(E),document.getElementById("no-questions").innerText="No questions have been added yet. Add ".concat(p.quizDuration*p.numberOfPlayers," questions to start.")):k(q)})),null===(l=document.getElementById("btn-add-question"))||void 0===l||l.addEventListener("click",(function(){var t=document.getElementById("txt-question"),n=document.getElementById("btnCloseModal");if(M(t.value,v)){var i=new e(t.value);v.forEach((function(e){return i.addAnswer(e)})),p.addQuestion(i),b(),C(),t.value="",p.quizDuration===p.questions.length&&k(g),n.click(),w()}else alert("Please fill in the question and provide at least one answer with the correct option.")})),null===(m=document.getElementById("btn-add-answer"))||void 0===m||m.addEventListener("click",(function(){var e=document.getElementById("txt-answer"),t=document.getElementById("chk-correct"),n={text:e.value,isCorrect:t.checked};v.push(n),P(),e.value="",t.checked=!1})),null===(y=document.getElementById("btn-add-player"))||void 0===y||y.addEventListener("click",(function(){var e=document.getElementById("player-name"),t=e.value.trim();p.addPlayer(t),e.value="",p.players.length===p.numberOfPlayers&&(S(),k(I),p.startQuiz())})),null===(h=document.getElementById("btnRestart"))||void 0===h||h.addEventListener("click",(function(){p.restartQuiz(),k(f)}));var b=function(){var e=document.getElementById("no-questions"),t=document.getElementById("question-list");t.innerHTML="",p.questions.forEach((function(e){var n=document.createElement("li");n.textContent=e.toString(),t.appendChild(n)})),e.classList.add("d-none")},P=function(){var e=document.getElementById("answers-list"),t=document.getElementById("correct-answer-list");e.innerHTML="",t.innerHTML="",v.forEach((function(t){var n=document.createElement("li");n.textContent=t.text,e.appendChild(n)}));var n=v.find((function(e){return e.isCorrect}));if(n){var i=document.createElement("li");i.textContent=n.text,t.appendChild(i)}Q(n)},C=function(){v.length=0,P()},w=function(){var e=document.getElementById("btn-add-q");p.questions.length===p.quizDuration*p.numberOfPlayers&&(e.disabled=!0)},Q=function(e){document.getElementById("btn-add-question").disabled=!e},z=function(e){[x,f,E,g,I,B,q].forEach((function(e){return e.classList.add("d-none")})),e.classList.remove("d-none")},k=function(e){if(z(e),e===q||e===E){var t=document.getElementById("btn-add-q"),i=document.getElementById("btn-next");return p.questionMode===n.Custom?(i.classList.add("d-none"),void t.classList.remove("d-none")):(i.classList.remove("d-none"),void t.classList.add("d-none"))}e!==I||S()},M=function(e,t){return!0},S=function(){var e,t;document.getElementById("current-player-container").classList.remove("d-none"),document.getElementById("current-player-name").innerText=null!==(t=null===(e=p.players[p.currentPlayerIndex])||void 0===e?void 0:e.name)&&void 0!==t?t:""};z(f)}))})();